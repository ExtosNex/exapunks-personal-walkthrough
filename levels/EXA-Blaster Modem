;GRAB ESSENTIAL VARS
MODE
GRAB 300
COPY F X
COPY F T
DROP

;GRAB PHONEBOOK
GRAB 301
LINK 800

;BRANCHER
REPL MOTHER

;DIAL NUMBERS
MARK LOOP
@REP 11
COPY F #DIAL
@END

;BRANCH
COPY 1 M

;CLOSE

NOOP
NOOP
COPY -1 #DIAL

TEST EOF
FJMP LOOP
WIPE
KILL
GRAB 400
WIPE
HALT



;MOTHER
MARK MOTHER
MAKE
MARK MOTHER_LOOP
COPY M F
REPL INJECT
JUMP MOTHER_LOOP

;MAKE EXA AND BRANCH
MARK INJECT
LINK 800
GRAB 200
REPL VAR
;DEL&REPL FILE CONTENTS
COPY 0 X
MARK COUNT
SEEK 1
ADDI X 1 X
TEST EOF
FJMP COUNT


DIVI X 2 X
SEEK -9999
MARK REPL_LOOP
COPY M F
COPY M F
SUBI X 1 X
TEST X = 0
FJMP REPL_LOOP

KILL
HALT


MARK VAR
COPY X M
COPY T M
JUMP VAR




