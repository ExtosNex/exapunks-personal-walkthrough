;MAKE FILE 400 FOR
;AN ARRAY OF PLYER NAMES
;AND SCORE
;FORMAT:
; SCORE, PLAYER
MAKE
DROP

;GRAB AND REPL 
LINK 800
GRAB 199

MARK REPL_LOOP
COPY F X
REPL CHILD
NOOP
TEST EOF
FJMP REPL_LOOP

COPY 0 X
;WAIT
MARK WAIT
NOOP
ADDI X 1 X
TEST X = 8
FJMP WAIT
DROP

LINK -1

JUMP SCORE


MARK CHILD
GRAB X
SEEK 1
;EMBER-2'S ALGORITHM

ADDI F F X
ADDI F X X
DIVI X 3 X

MULI F F T
DIVI T F T

ADDI X T X

SUBI F F T
MULI T 20 T
ADDI X T X
;SCORE IS STORED IN X

;STORE NAME IN T
SEEK -9999
COPY F T


;WRITE NAME TO ARRAY
DROP
LINK -1
NOOP
GRAB 400
SEEK 9999
COPY X F
COPY T F
DROP
HALT





;CALC HIGHEST SCORE
MARK SCORE
GRAB 400

COPY F X
SEEK 1
MARK LOOP
TEST F > X
TJMP HIGHER
;FALSE
SEEK 1
TEST EOF
FJMP LOOP

MARK ENDFILE
SEEK -9999
;LOOK FOR PLAYER NAME
MARK PARSE
TEST F = X
FJMP PARSE
COPY F X

WIPE
MAKE
COPY X F
HALT


;CHANGE VAR
MARK HIGHER
SEEK -1
COPY F X
SEEK 1
TEST EOF
TJMP ENDFILE
JUMP LOOP


;MARK PLR_VAR
;COPY M X
;COPY X F
;;TEST IF TERMINATE
;TEST X = 9999
;FJMP PLR_VAR
;VOID F

;MARK HIGHER
;SEEK -1
;COPY F X
;MARK LOOP
;TEST F < X
;TJMP HIGHER
;TEST EOF
;FJMP LOOP


